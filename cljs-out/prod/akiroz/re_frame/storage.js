// Compiled by ClojureScript 1.10.520 {:static-fns true, :optimize-constants true}
goog.provide('akiroz.re_frame.storage');
goog.require('cljs.core');
goog.require('cljs.core.constants');
goog.require('re_frame.core');
goog.require('alandipert.storage_atom');
goog.require('cljs.spec.alpha');
cljs.spec.alpha.def_impl(cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_or,cljs.core.cst$kw$nil,cljs.core.cst$sym$cljs$core_SLASH_nil_QMARK_,cljs.core.cst$kw$boolean,cljs.core.cst$sym$cljs$core_SLASH_boolean_QMARK_,cljs.core.cst$kw$number,cljs.core.cst$sym$cljs$core_SLASH_number_QMARK_,cljs.core.cst$kw$string,cljs.core.cst$sym$cljs$core_SLASH_string_QMARK_,cljs.core.cst$kw$keyword,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$symbol,cljs.core.cst$sym$cljs$core_SLASH_symbol_QMARK_,cljs.core.cst$kw$uuid,cljs.core.cst$sym$cljs$core_SLASH_uuid_QMARK_,cljs.core.cst$kw$date,cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_partial,cljs.core.cst$sym$cljs$core_SLASH_instance_QMARK_,cljs.core.cst$sym$js_SLASH_Date),cljs.core.cst$kw$list,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_list_QMARK_),cljs.core.cst$kw$vector,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_vector_QMARK_),cljs.core.cst$kw$set,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_set_QMARK_),cljs.core.cst$kw$map,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_map_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data)),cljs.spec.alpha.or_spec_impl(new cljs.core.PersistentVector(null, 12, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$nil,cljs.core.cst$kw$boolean,cljs.core.cst$kw$number,cljs.core.cst$kw$string,cljs.core.cst$kw$keyword,cljs.core.cst$kw$symbol,cljs.core.cst$kw$uuid,cljs.core.cst$kw$date,cljs.core.cst$kw$list,cljs.core.cst$kw$vector,cljs.core.cst$kw$set,cljs.core.cst$kw$map], null),new cljs.core.PersistentVector(null, 12, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$cljs$core_SLASH_nil_QMARK_,cljs.core.cst$sym$cljs$core_SLASH_boolean_QMARK_,cljs.core.cst$sym$cljs$core_SLASH_number_QMARK_,cljs.core.cst$sym$cljs$core_SLASH_string_QMARK_,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$sym$cljs$core_SLASH_symbol_QMARK_,cljs.core.cst$sym$cljs$core_SLASH_uuid_QMARK_,cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_partial,cljs.core.cst$sym$cljs$core_SLASH_instance_QMARK_,cljs.core.cst$sym$js_SLASH_Date),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_list_QMARK_),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_vector_QMARK_),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_set_QMARK_),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_map_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data)], null),new cljs.core.PersistentVector(null, 12, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.nil_QMARK_,cljs.core.boolean_QMARK_,cljs.core.number_QMARK_,cljs.core.string_QMARK_,cljs.core.keyword_QMARK_,cljs.core.symbol_QMARK_,cljs.core.uuid_QMARK_,cljs.core.partial.cljs$core$IFn$_invoke$arity$2(cljs.core.instance_QMARK_,Date),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,new cljs.core.PersistentArrayMap(null, 5, [cljs.core.cst$kw$cljs$spec$alpha_SLASH_kind_DASH_form,cljs.core.cst$sym$cljs$core_SLASH_list_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_cpred,(function (G__15683){
return cljs.core.list_QMARK_(G__15683);
}),cljs.core.cst$kw$kind,cljs.core.list_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_conform_DASH_all,true,cljs.core.cst$kw$cljs$spec$alpha_SLASH_describe,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_list_QMARK_)], null),null),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,new cljs.core.PersistentArrayMap(null, 5, [cljs.core.cst$kw$cljs$spec$alpha_SLASH_kind_DASH_form,cljs.core.cst$sym$cljs$core_SLASH_vector_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_cpred,(function (G__15684){
return cljs.core.vector_QMARK_(G__15684);
}),cljs.core.cst$kw$kind,cljs.core.vector_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_conform_DASH_all,true,cljs.core.cst$kw$cljs$spec$alpha_SLASH_describe,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_vector_QMARK_)], null),null),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,new cljs.core.PersistentArrayMap(null, 5, [cljs.core.cst$kw$cljs$spec$alpha_SLASH_kind_DASH_form,cljs.core.cst$sym$cljs$core_SLASH_set_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_cpred,(function (G__15685){
return cljs.core.set_QMARK_(G__15685);
}),cljs.core.cst$kw$kind,cljs.core.set_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_conform_DASH_all,true,cljs.core.cst$kw$cljs$spec$alpha_SLASH_describe,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$kind,cljs.core.cst$sym$cljs$core_SLASH_set_QMARK_)], null),null),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_tuple,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data),cljs.spec.alpha.tuple_impl.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data], null)),new cljs.core.PersistentArrayMap(null, 7, [cljs.core.cst$kw$into,cljs.core.PersistentArrayMap.EMPTY,cljs.core.cst$kw$cljs$spec$alpha_SLASH_kind_DASH_form,cljs.core.cst$sym$cljs$core_SLASH_map_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_cpred,(function (G__15686){
return cljs.core.map_QMARK_(G__15686);
}),cljs.core.cst$kw$kind,cljs.core.map_QMARK_,cljs.core.cst$kw$cljs$spec$alpha_SLASH_kfn,(function (i__13545__auto__,v__13546__auto__){
return cljs.core.nth.cljs$core$IFn$_invoke$arity$2(v__13546__auto__,(0));
}),cljs.core.cst$kw$cljs$spec$alpha_SLASH_conform_DASH_all,true,cljs.core.cst$kw$cljs$spec$alpha_SLASH_describe,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_map_DASH_of,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data)], null),null)], null),null));
akiroz.re_frame.storage.storage_atoms = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
akiroz.re_frame.storage.register_store = (function akiroz$re_frame$storage$register_store(store_key){
if(cljs.core.truth_((function (){var fexpr__15687 = cljs.core.deref(akiroz.re_frame.storage.storage_atoms);
return (fexpr__15687.cljs$core$IFn$_invoke$arity$1 ? fexpr__15687.cljs$core$IFn$_invoke$arity$1(store_key) : fexpr__15687.call(null,store_key));
})())){
return null;
} else {
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(akiroz.re_frame.storage.storage_atoms,cljs.core.assoc,store_key,alandipert.storage_atom.local_storage(cljs.core.atom.cljs$core$IFn$_invoke$arity$1(null),store_key));
}
});
cljs.spec.alpha.def_impl(cljs.core.cst$sym$akiroz$re_DASH_frame$storage_SLASH_register_DASH_store,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_fspec,cljs.core.cst$kw$args,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$store_DASH_key], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword_QMARK_], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_], null)),null,null),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,cljs.core.any_QMARK_,null,null),cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,null,null,null));
akiroz.re_frame.storage.__GT_store = (function akiroz$re_frame$storage$__GT_store(store_key,data){
return cljs.core.reset_BANG_((function (){var fexpr__15688 = cljs.core.deref(akiroz.re_frame.storage.storage_atoms);
return (fexpr__15688.cljs$core$IFn$_invoke$arity$1 ? fexpr__15688.cljs$core$IFn$_invoke$arity$1(store_key) : fexpr__15688.call(null,store_key));
})(),data);
});
cljs.spec.alpha.def_impl(cljs.core.cst$sym$akiroz$re_DASH_frame$storage_SLASH__DASH__GT_store,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_fspec,cljs.core.cst$kw$args,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$store_DASH_key,cljs.core.cst$kw$data], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword_QMARK_,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data], null)),null,null),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,cljs.core.any_QMARK_,null,null),cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,null,null,null));
akiroz.re_frame.storage._LT__store = (function akiroz$re_frame$storage$_LT__store(store_key){
return cljs.core.deref((function (){var fexpr__15689 = cljs.core.deref(akiroz.re_frame.storage.storage_atoms);
return (fexpr__15689.cljs$core$IFn$_invoke$arity$1 ? fexpr__15689.cljs$core$IFn$_invoke$arity$1(store_key) : fexpr__15689.call(null,store_key));
})());
});
cljs.spec.alpha.def_impl(cljs.core.cst$sym$akiroz$re_DASH_frame$storage_SLASH__LT__DASH_store,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_fspec,cljs.core.cst$kw$args,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_),cljs.core.cst$kw$ret,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$store_DASH_key], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword_QMARK_], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_], null)),null,null),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,null,null),cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cljs_DASH_data,null,null,null));
akiroz.re_frame.storage.reg_co_fx_BANG_ = (function akiroz$re_frame$storage$reg_co_fx_BANG_(store_key,p__15690){
var map__15691 = p__15690;
var map__15691__$1 = (((((!((map__15691 == null))))?(((((map__15691.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__15691.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__15691):map__15691);
var fx = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__15691__$1,cljs.core.cst$kw$fx);
var cofx = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__15691__$1,cljs.core.cst$kw$cofx);
akiroz.re_frame.storage.register_store(store_key);

if(cljs.core.truth_(fx)){
var G__15693_15697 = fx;
var G__15694_15698 = ((function (G__15693_15697,map__15691,map__15691__$1,fx,cofx){
return (function (data){
return akiroz.re_frame.storage.__GT_store(store_key,data);
});})(G__15693_15697,map__15691,map__15691__$1,fx,cofx))
;
(re_frame.core.reg_fx.cljs$core$IFn$_invoke$arity$2 ? re_frame.core.reg_fx.cljs$core$IFn$_invoke$arity$2(G__15693_15697,G__15694_15698) : re_frame.core.reg_fx.call(null,G__15693_15697,G__15694_15698));
} else {
}

if(cljs.core.truth_(cofx)){
var G__15695 = cofx;
var G__15696 = ((function (G__15695,map__15691,map__15691__$1,fx,cofx){
return (function (coeffects,_){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(coeffects,cofx,akiroz.re_frame.storage._LT__store(store_key));
});})(G__15695,map__15691,map__15691__$1,fx,cofx))
;
return (re_frame.core.reg_cofx.cljs$core$IFn$_invoke$arity$2 ? re_frame.core.reg_cofx.cljs$core$IFn$_invoke$arity$2(G__15695,G__15696) : re_frame.core.reg_cofx.call(null,G__15695,G__15696));
} else {
return null;
}
});
cljs.spec.alpha.def_impl(cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_fx,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.keyword_QMARK_);
cljs.spec.alpha.def_impl(cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cofx,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.keyword_QMARK_);
cljs.spec.alpha.def_impl(cljs.core.cst$sym$akiroz$re_DASH_frame$storage_SLASH_reg_DASH_co_DASH_fx_BANG_,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_fspec,cljs.core.cst$kw$args,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$handlers,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_keys,cljs.core.cst$kw$req_DASH_un,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_or,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_fx,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cofx)], null)))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$handlers,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_keys,cljs.core.cst$kw$req_DASH_un,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_or,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_fx,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cofx)], null))),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$store_DASH_key,cljs.core.cst$kw$handlers], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword_QMARK_,cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([cljs.core.cst$kw$req_DASH_un,cljs.core.cst$kw$opt_DASH_un,cljs.core.cst$kw$gfn,cljs.core.cst$kw$pred_DASH_exprs,cljs.core.cst$kw$keys_DASH_pred,cljs.core.cst$kw$opt_DASH_keys,cljs.core.cst$kw$req_DASH_specs,cljs.core.cst$kw$req,cljs.core.cst$kw$req_DASH_keys,cljs.core.cst$kw$opt_DASH_specs,cljs.core.cst$kw$pred_DASH_forms,cljs.core.cst$kw$opt],[new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$or,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_fx,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cofx)], null),null,null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__15699){
return cljs.core.map_QMARK_(G__15699);
}),(function (G__15699){
return ((cljs.core.contains_QMARK_(G__15699,cljs.core.cst$kw$fx)) || (cljs.core.contains_QMARK_(G__15699,cljs.core.cst$kw$cofx)));
})], null),(function (G__15699){
return ((cljs.core.map_QMARK_(G__15699)) && (((cljs.core.contains_QMARK_(G__15699,cljs.core.cst$kw$fx)) || (cljs.core.contains_QMARK_(G__15699,cljs.core.cst$kw$cofx)))));
}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_fx,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cofx], null),null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$fx,cljs.core.cst$kw$cofx], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_map_QMARK_,cljs.core.cst$sym$_PERCENT_)),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_or,cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_contains_QMARK_,cljs.core.cst$sym$_PERCENT_,cljs.core.cst$kw$fx),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_contains_QMARK_,cljs.core.cst$sym$_PERCENT_,cljs.core.cst$kw$cofx)))], null),null]))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_keys,cljs.core.cst$kw$req_DASH_un,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_or,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_fx,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cofx)], null))], null)),null,null),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$handlers,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_keys,cljs.core.cst$kw$req_DASH_un,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_or,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_fx,cljs.core.cst$kw$akiroz$re_DASH_frame$storage_SLASH_cofx)], null))),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,cljs.core.any_QMARK_,null,null),cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,null,null,null));
akiroz.re_frame.storage.persist_db = (function akiroz$re_frame$storage$persist_db(store_key,db_key){
akiroz.re_frame.storage.register_store(store_key);

var G__15700 = cljs.core.cst$kw$id;
var G__15701 = cljs.core.keyword.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(db_key),"->",cljs.core.str.cljs$core$IFn$_invoke$arity$1(store_key)].join(''));
var G__15702 = cljs.core.cst$kw$before;
var G__15703 = ((function (G__15700,G__15701,G__15702){
return (function (context){
return cljs.core.assoc_in(context,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$coeffects,cljs.core.cst$kw$db,db_key], null),akiroz.re_frame.storage._LT__store(store_key));
});})(G__15700,G__15701,G__15702))
;
var G__15704 = cljs.core.cst$kw$after;
var G__15705 = ((function (G__15700,G__15701,G__15702,G__15703,G__15704){
return (function (context){
var temp__5735__auto___15706 = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(context,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$effects,cljs.core.cst$kw$db,db_key], null));
if(cljs.core.truth_(temp__5735__auto___15706)){
var value_15707 = temp__5735__auto___15706;
akiroz.re_frame.storage.__GT_store(store_key,value_15707);
} else {
}

return context;
});})(G__15700,G__15701,G__15702,G__15703,G__15704))
;
return (re_frame.core.__GT_interceptor.cljs$core$IFn$_invoke$arity$6 ? re_frame.core.__GT_interceptor.cljs$core$IFn$_invoke$arity$6(G__15700,G__15701,G__15702,G__15703,G__15704,G__15705) : re_frame.core.__GT_interceptor.call(null,G__15700,G__15701,G__15702,G__15703,G__15704,G__15705));
});
cljs.spec.alpha.def_impl(cljs.core.cst$sym$akiroz$re_DASH_frame$storage_SLASH_persist_DASH_db,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_fspec,cljs.core.cst$kw$args,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$db_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$db_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$store_DASH_key,cljs.core.cst$kw$db_DASH_key], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword_QMARK_,cljs.core.keyword_QMARK_], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_], null)),null,null),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$db_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,cljs.core.any_QMARK_,null,null),cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,null,null,null));
akiroz.re_frame.storage.persist_db_keys = (function akiroz$re_frame$storage$persist_db_keys(store_key,db_keys){
akiroz.re_frame.storage.register_store(store_key);

var G__15708 = cljs.core.cst$kw$id;
var G__15709 = cljs.core.keyword.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.str,cljs.core.sort.cljs$core$IFn$_invoke$arity$1(db_keys))),"->",cljs.core.str.cljs$core$IFn$_invoke$arity$1(store_key)].join(''));
var G__15710 = cljs.core.cst$kw$before;
var G__15711 = ((function (G__15708,G__15709,G__15710){
return (function (context){
return cljs.core.update_in.cljs$core$IFn$_invoke$arity$4(context,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$coeffects,cljs.core.cst$kw$db], null),cljs.core.merge,akiroz.re_frame.storage._LT__store(store_key));
});})(G__15708,G__15709,G__15710))
;
var G__15712 = cljs.core.cst$kw$after;
var G__15713 = ((function (G__15708,G__15709,G__15710,G__15711,G__15712){
return (function (context){
var temp__5735__auto___15715 = (function (){var G__15714 = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(context,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$effects,cljs.core.cst$kw$db], null));
if((G__15714 == null)){
return null;
} else {
return cljs.core.select_keys(G__15714,db_keys);
}
})();
if(cljs.core.truth_(temp__5735__auto___15715)){
var value_15716 = temp__5735__auto___15715;
akiroz.re_frame.storage.__GT_store(store_key,value_15716);
} else {
}

return context;
});})(G__15708,G__15709,G__15710,G__15711,G__15712))
;
return (re_frame.core.__GT_interceptor.cljs$core$IFn$_invoke$arity$6 ? re_frame.core.__GT_interceptor.cljs$core$IFn$_invoke$arity$6(G__15708,G__15709,G__15710,G__15711,G__15712,G__15713) : re_frame.core.__GT_interceptor.call(null,G__15708,G__15709,G__15710,G__15711,G__15712,G__15713));
});
cljs.spec.alpha.def_impl(cljs.core.cst$sym$akiroz$re_DASH_frame$storage_SLASH_persist_DASH_db_DASH_keys,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_fspec,cljs.core.cst$kw$args,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$db_DASH_keys,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$db_DASH_keys,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$store_DASH_key,cljs.core.cst$kw$db_DASH_keys], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword_QMARK_,cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$sym$keyword_QMARK_,cljs.core.keyword_QMARK_,new cljs.core.PersistentArrayMap(null, 4, [cljs.core.cst$kw$cljs$spec$alpha_SLASH_kind_DASH_form,null,cljs.core.cst$kw$cljs$spec$alpha_SLASH_cpred,(function (G__15717){
return cljs.core.coll_QMARK_(G__15717);
}),cljs.core.cst$kw$cljs$spec$alpha_SLASH_conform_DASH_all,true,cljs.core.cst$kw$cljs$spec$alpha_SLASH_describe,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_)], null),null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_)], null)),null,null),cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_cat,cljs.core.cst$kw$store_DASH_key,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_,cljs.core.cst$kw$db_DASH_keys,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_coll_DASH_of,cljs.core.cst$sym$cljs$core_SLASH_keyword_QMARK_)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,cljs.core.any_QMARK_,null,null),cljs.core.cst$sym$cljs$core_SLASH_any_QMARK_,null,null,null));
